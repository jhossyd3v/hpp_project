!function(){const e="https://pokeapi.co/api/v2/pokemon/",n="https://unpkg.com/pokeapi-sprites@2.0.2/sprites/pokemon/other/dream-world/",t="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/";let o={},i={},r={},s={},a=[],_=[],l={},m={},p=function(e,n,t=-1){return r={},c(e,n,t),r.hasOwnProperty("id")},c=function(e,n,t=-1){-1===t&&(t=u(n)),r={id:t,name:e,url:n,description:"",types:[],hasInfoFromApi:!1,genera:""}},u=function(e){let n=e.split("/"),t=n.length-2;return parseInt(n[t])},d=function(e){return`pkmn${e}`},h=function(e=1){return o={},f(e),o.hasOwnProperty("id")&&e===o.id},f=function(e=1){let n=d(e),t=localStorage.getItem(n);o=null===t?{}:JSON.parse(t)},g=function(e={}){return i={},$(e),i.hasOwnProperty("id")&&e.id===i.id},$=function(e={}){if(e.hasOwnProperty("id")){let n=d(e.id);i=e,localStorage.setItem(n,JSON.stringify(e))}else i={}},k=function(n,t,s=!0){return new Promise(((l,m)=>{let c={result:!1};a=[],_=[],n>150?l(c):(n+t>150&&(t=150-n),P(n,t)?(a=_,s&&y(),c.result=!0,l(c)):fetch(`${e}?limit=${t}&offset=${n}`).then((e=>e.json())).then((e=>{const{results:n}=e;n.forEach((e=>{p(e.name,e.url)&&(h(r.id)?a.push(o):g(r)?a.push(i):a.push(r))})),a.length>0&&(c.result=!0),s&&y(),l(c)})).catch((e=>{m(e)})))}))},y=function(){let e=document.getElementById("pokemons_container"),n="";a.forEach((e=>{n+=w(e)})),e.innerHTML=e.innerHTML+n},w=function(e={}){let t="";return e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&(t=`<a class="pokemon_item" href="./pokemon.html?id=${e.id}">\n                                <header class="pokemon_item__header">\n                                    <span class="pokemon_item__header__id">${e.id}</span>\n                                    <span class="pokemon_item__header__name">${e.name}</span>\n                                </header>\n                                <img src="${n}${e.id}.svg" alt="Imagen de ${e.name}" class="pokemon_item__image"></img>\n                            </a>`),t},P=function(e,n){return v(e,n),_.length===n},v=function(e,n){let t=e+1,i=e+n;for(_=[];t<=i;t++)h(t)&&_.push(o)},I=function(e=1){s={},e>150?e=150:e<1&&(e=1);let n=e-2;n<1&&(n=1),k(n,3,!1).then((n=>{n.result&&(h(e)?o.hasInfoFromApi?(s=o,S()):O(e).then((e=>{e.result&&S()})).catch((e=>{console.log(e)})):n.result&&O(e).then((e=>{e.result&&S()})).catch((e=>{console.log(e)})))})).catch((e=>{console.log(e)}))},O=function(n=1){return new Promise(((t,o)=>{let a={result:!1},_=`${e}${n}`;fetch(_).then((e=>e.json())).then((e=>{const{name:t,types:o,species:l}=e;if(p(t,_,n))return r.types=E(o),r.hasInfoFromApi=!0,g(r)?(s=i,a.result=!0):(s=r,a.result=!0),fetch(l.url);throw new Error("Pokemon couldn't be created")})).then((e=>e.json())).then((e=>{const{flavor_text_entries:n,genera:o}=e;s.description=x(n),s.genera=T(o),g(s)&&(a.result=!0),t(a)})).catch((e=>{o(e)}))}))},E=function(e=[]){let n=[];return e.forEach((e=>{n.push(e.type.name)})),n},x=function(e=[]){let n="";return flavorTextEntriesFiltered=e.filter((e=>"en"===e.language.name)),flavorTextEntriesFiltered.length>0&&(n=flavorTextEntriesFiltered[0].flavor_text.toString()),n},T=function(e=[]){let n="",t=e.filter((e=>"en"===e.language.name));return t.length>0&&(n=t[0].genus),n},S=function(){let e=document.getElementById("pokemon_container"),n=document.getElementById("previous_pokemon"),t=document.getElementById("next_pokemon");e.innerHTML=F(),H(s.id)&&(n.innerHTML=L(l,!0)),b(s.id)&&(t.innerHTML=L(m,!1))},F=function(){let e="",t="",o="";if(s.hasOwnProperty("id")){const{types:i,name:r,id:a,description:_,genera:l}=s;i.length>0&&(t=i[0]),o=i.map((e=>`<span class="pokemon_container__type pokemon_container__type--${e}">${e}</span>`)),o=o.join(""),e=`<figure id="pokemon_container__image_container" class="pokemon_container__image_container--${t}">\n                                <img src="${n}${a}.svg" alt="Imagen de ${r}" id="pokemon_container__image">\n                            </figure>\n                            <section id="pokemon_container__data">\n                                <p><span id="pokemon_container__name">${a} - ${r}</span>${o}</p>\n                                <p id="pokemon_container__genera">${l}</p>\n                                <p id="pokemon_container__description">${_}</p>\n                            </section>`}return e},L=function(e={},n=!0){let o="",i="< ";return e.hasOwnProperty("id")&&(n?o=`<a class="nav_menu__list__item__link" href="./pokemon.html?id=${e.id}">\n                                <span class="nav_menu__list__item__name">${i}${e.id}<span class="nav_menu__list__item__no_mobile"> - ${e.name}</span></span>\n                                <img class="nav_menu__list__item__image" src="${t}${e.id}.png" alt="Sprite de ${e.name}">\n                            </a>`:(i=" >",o=`<a class="nav_menu__list__item__link" href="./pokemon.html?id=${e.id}">\n                                <img class="nav_menu__list__item__image" src="${t}${e.id}.png" alt="Sprite de ${e.name}">\n                                <span class="nav_menu__list__item__name">${e.id}<span class="nav_menu__list__item__no_mobile"> - ${e.name}</span>${i}</span>\n                            </a>`)),o},H=function(e){l={};let n=e-1;return n>=1&&M(n),l.hasOwnProperty("id")},M=function(e=1){h(e)&&(l=o)},b=function(e){m={};let n=e+1;return n<=150&&j(n),m.hasOwnProperty("id")},j=function(e=1){h(e)&&(m=o)};window.hasOwnProperty("pokedex")||(window.pokedex={getListOfPokemons:k,getPokemonInfo:I})}();